{"ignition":{"version":"3.3.0"},"passwd":{"users":[{"name":"core","shell":"/sbin/nologin"},{"groups":["sudo","docker"],"name":"marvin.vogt","sshAuthorizedKeys":["ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOELWzSrWOfYX4B7v0kYnIyQT3M3wVV1c6X+LpoJFDcI"]},{"name":"bitcoind","noCreateHome":true,"system":true},{"name":"electrs","noCreateHome":true,"system":true},{"name":"esplora","noCreateHome":true,"system":true}]},"storage":{"directories":[{"group":{"name":"bitcoind"},"path":"/mnt/data/bitcoin","user":{"name":"bitcoind"},"mode":493},{"group":{"name":"electrs"},"path":"/mnt/data/electrs","user":{"name":"electrs"},"mode":493},{"group":{"name":"esplora"},"path":"/mnt/data/esplora","user":{"name":"esplora"},"mode":493}],"files":[{"path":"/etc/bitcoin/bitcoin.conf","contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/0zOsQrCMBDG8f2e4qCzoS2IU0Bxc9Cig3O4nBhI70outT6+dCi4/T9+yzeGL6kIU00q5vt9C9DgiYiniqTjGCRiTsK4xuVxu+7uw3kTc2BcPlx8B2Wi2bj4yK8w57ruKZgtWqIX3RIafL5T5ZysYlYKGYd+wL8PsGzuoy6SNcRj1x9c61rXwS8AAP//ni/LprAAAAA="}},{"path":"/etc/electrs/config.toml","contents":{"compression":"","source":"data:;base64,ZGJfZGlyID0gIi9tbnQvZGF0YS9lbGVjdHJzIgpuZXR3b3JrID0gImJpdGNvaW4iCmF1dGggPSAiZGVmYXVsdDpub3Bhc3N3b3JkIgo="}},{"path":"/etc/extensions/bitcoin-27.1-x86-64.raw","contents":{"source":"https://github.com/SRv6d/flatcar-banzai/releases/download/10341053369/bitcoin-27.1-x86-64.raw","verification":{"hash":"sha256-f9f63fe90827c47ce25299e323568f4ab0766932a7211024efbefffee1a478cc"}},"mode":420}],"filesystems":[{"device":"/dev/sdb","format":"ext4","label":"data1"}]},"systemd":{"units":[{"contents":"[Unit]\nDescription=Data mount\n\n[Mount]\nWhat=/dev/disk/by-label/data1\nWhere=/mnt/data\nType=ext4\n\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"mnt-data.mount"},{"enabled":true,"name":"docker.service"},{"contents":"[Unit]\nDescription=Electrs electrum server\nRequires=bitcoind.service\nRequires=mnt-data.mount\n\n[Service]\nTimeoutStartSec=0\nExecStartPre=-/usr/bin/docker rm --force electrs\nExecStart=/usr/bin/docker run \\\n    --name electrs \\\n    --pull always \\\n    -v /etc/electrs:/etc/electrs:ro \\\n    -v /mnt/data/electrs:/mnt/data/electrs:rw \\\n    --net=host \\\n    srv6d/electrs:0.10.5\nExecStop=/usr/bin/docker stop electrs\nRestart=always\nRestartSec=5s\n\n[Install]\nWantedBy=multi-user.target\n","enabled":false,"name":"electrs.service"},{"contents":"[Unit]\nDescription=Esplora mainnet electrum server\nRequires=bitcoind.service\nRequires=mnt-data.mount\n\n[Service]\nTimeoutStartSec=0\nExecStartPre=-/usr/bin/docker rm --force esplora\nExecStart=/usr/bin/docker run \\\n    --name esplora \\\n    --pull always \\\n    -v /etc/esplora:/etc/esplora:ro \\\n    -v /mnt/data/esplora:/mnt/data/esplora:rw \\\n    --net=host \\\n    blockstream/esplora\nExecStop=/usr/bin/docker stop esplora\nRestart=always\nRestartSec=5s\n\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"esplora.service"}]}}
